<nav class="bg-white dark:bg-gray-900 border-b border-cyan-300 dark:border-cyan-600">
  <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
    <a href="/" class="flex items-center space-x-3 rtl:space-x-reverse">
      <i class="mdi mdi-hospital-box text-3xl mr-3 text-cyan-500 transition duration-75 dark:text-cyan-500"></i>
      <span
        class="self-center text-xl font-semibold sm:text-2xl whitespace-nowrap dark:text-white text-black">PRISM</span>
    </a>
    <div class="flex items-center md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse">
      <button type="button"
        class="flex text-sm bg-gray-800 rounded-full md:me-0 focus:ring-4 focus:ring-cyan-500 dark:focus:ring-cyan-700"
        id="user-menu-button" aria-expanded="false" data-dropdown-toggle="user-dropdown"
        data-dropdown-placement="bottom">
        <span class="sr-only">Open user menu</span>
        <img class="w-8 h-8 rounded-full" src="{{ url_for('static', filename=user_info.profilePict) }}"
          alt="user photo" />
      </button>
      <!-- Dropdown menu -->
      <div
        class="z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-950 dark:divide-gray-600"
        id="user-dropdown">
        <div class="px-4 py-3">
          <span class="block text-sm text-gray-900 dark:text-white">{{ user_info.username }}</span>
          <span class="block text-sm text-gray-500 truncate dark:text-gray-400">{{ user_info.email }}</span>
        </div>
        <ul class="py-2" aria-labelledby="user-menu-button">
          <li>
            <a href="/profile"
              class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-cyan-500 hover:text-white dark:hover:bg-cyan-600 dark:text-gray-200 dark:hover:text-white">
              <i class="mdi mdi-account text-lg me-2"></i>My Profile</a>
          </li>
          <li>
            <a href="/"
              class="flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-cyan-500 hover:text-white dark:hover:bg-cyan-600 dark:text-gray-200 dark:hover:text-white">
              <i class="mdi mdi-home text-lg me-2"></i>Home</a>
          </li>
        </ul>
        <div class="py-2">
          <button type="button" onclick="logout()"
            class="flex items-center px-4 w-full py-2 text-sm text-gray-700 hover:bg-cyan-500 hover:text-white dark:hover:bg-cyan-600 dark:text-gray-200 dark:hover:text-white">
            <i class="mdi mdi-logout text-lg me-2"></i>
            Logout
          </button>
        </div>
        <div class="py-2">
          <a href="/sign-up"
            class="flex items-center px-4 w-full py-2 text-sm text-gray-700 hover:bg-cyan-500 hover:text-white dark:hover:bg-cyan-600 dark:text-gray-200 dark:hover:text-white">
            <i class="mdi mdi-account-plus-outline text-lg me-2"></i>Sign Up</a>
        </div>
      </div>
      <button data-collapse-toggle="navbar-user" type="button"
        class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-cyan-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
        aria-controls="navbar-user" aria-expanded="false">
        <span class="sr-only">Open main menu</span>
        <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 17 14">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M1 1h15M1 7h15M1 13h15" />
        </svg>
      </button>
    </div>
    <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-user">
      <ul
        class="flex flex-col font-medium p-2 md:p-0 mt-2 border border-gray-100 rounded-lg bg-gray-50 md:space-x-1 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-white dark:bg-gray-900 md:dark:bg-gray-900 dark:border-gray-500 text-gray-600 dark:text-gray-300">
        <li class="me-1 px-1 relative">
          <button id="dropdownNavbarButton" data-dropdown-toggle="dropdownNavbar"
            class="inline-flex items-center justify-center p-1 text-sm w-full border-b-2 border-transparent hover:text-cyan-500 group transition duration-300 ease-in-out"
            type="button">
            ICU 501
            <svg class="w-3 h-3 ml-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <!-- Dropdown menu -->
          <div id="dropdownNavbar"
            class="absolute z-10 hidden font-normal bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-950 dark:divide-gray-600">
            <ul class="py-1 text-xs text-gray-800 dark:text-gray-300" aria-labelledby="dropdownNavbarButton">
              <li>
                <a href="/similarity/50100001"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100001
                </a>
              </li>
              <li>
                <a href="/similarity/50100002"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100002
                </a>
              </li>
              <li>
                <a href="/similarity/50100003"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100003
                </a>
              </li>
              <li>
                <a href="/similarity/50100004"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100004
                </a>
              </li>
              <li>
                <a href="/similarity/50100005"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100005
                </a>
              </li>
              <li>
                <a href="/similarity/50100006"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100006
                </a>
              </li>
              <li>
                <a href="/similarity/50100007"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100007
                </a>
              </li>
              <li>
                <a href="/similarity/50100008"
                  class="block px-3 py-1 hover:bg-cyan-500 hover:text-white dark:hover:text-white dark:hover:bg-cyan-600">
                  Bed 50100008
                </a>
              </li>
            </ul>
          </div>
        </li>
        <li class="me-1 px-1">
          <a href=""
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg group transition duration-300 ease-in-out cursor-not-allowed">
            INFORMATION
          </a>
        </li>
        <li class="me-1 px-1">
          <a href="/similarity/{{ bed_id }}"
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg hover:border-cyan-500 hover:text-cyan-500 group transition duration-300 ease-in-out">
            SIMILARITY
          </a>
        </li>
        <li class="me-1 px-1">
          <a href="/prediction/{{ bed_id }}"
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg hover:border-cyan-500 hover:text-cyan-500 group transition duration-300 ease-in-out">
            PREDICTION
          </a>
        </li>
        <li class="me-1 px-1">
          <a href="/treatments/{{ bed_id }}"
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg hover:border-cyan-500 hover:text-cyan-500 group transition duration-300 ease-in-out">
            TREATMENT
          </a>
        </li>
        <li class="me-1 px-1">
          <a href="/summary/{{ bed_id }}"
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg group transition duration-300 ease-in-out cursor-not-allowed">
            SUMMARY
          </a>
        </li>
        <li class="me-1 px-1">
          <a href=""
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg group transition duration-300 ease-in-out cursor-not-allowed">
            DIAGNOSIS
          </a>
        </li>
        <li class="me-1 px-1">
          <a href=""
            class="inline-flex items-center justify-center p-1 text-sm border-b-2 border-transparent rounded-t-lg group transition duration-300 ease-in-out cursor-not-allowed">
            HIGH-ORDER REASONING
          </a>
        </li>
        <li class="me-1 px-1">
          <div id="toggle-container"
            class="relative w-12 h-6 bg-gray-200 dark:bg-gray-800 rounded-full flex items-center p-1 cursor-pointer transition-all duration-300">
            <div id="toggle-circle"
              class="w-5 h-5 bg-cyan-500 rounded-full shadow-md transform transition-all duration-300">
              <svg id="toggle-icon" class="w-4 h-4 m-0.5" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                <path id="sun-icon"
                  d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                  class="hidden"></path>
                <path id="moon-icon" d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                  class="hidden"></path>
              </svg>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
<script>
  $(document).ready(function () {
    const currentPath = window.location.pathname;

    // Highlight item di navbar
    $("#navbar-user a").each(function () {
      const href = $(this).attr("href");

      if (currentPath === href) {
        $(this)
          .addClass("text-cyan-500 border-cyan-500")
          .removeClass("border-transparent");
      } else {
        $(this)
          .removeClass("text-cyan-500 border-cyan-500")
          .addClass("border-transparent");
      }
    });

    const bed_id = "{{ bed_id }}";

    // Highlight item di dropdown berdasarkan bed_id
    $("#dropdownNavbar a").each(function () {
      const href = $(this).attr("href");

      const bedIdRegex = /\/(similarity|prediction)\/(\d+)/;
      const match = href.match(bedIdRegex);
      const hrefBedId = match ? match[2] : null;

      if (hrefBedId === bed_id) {
        $(this)
          .addClass("bg-cyan-500 text-white dark:bg-cyan-600")
          .removeClass("dark:hover:bg-cyan-600 dark:hover:text-white");
      } else {
        $(this)
          .removeClass("bg-cyan-500 text-white dark:bg-cyan-600")
          .addClass("dark:hover:bg-cyan-600 dark:hover:text-white");
      }
    });
  });

  function logout() {
    $.ajax({
      url: "/logout",
      type: "DELETE",
      success: function (response) {
        document.cookie =
          "mytoken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        window.location.href = "/";
      },
      error: function (xhr, status, error) {
        console.error(error);
      },
    });
  }
</script>